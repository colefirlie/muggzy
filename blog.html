<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Blog</title>
  <style>
    * { box-sizing: border-box; }
    html, body { margin: 0; padding: 0; }

    body {
      background: #efefef;
      color: #222;
      font-family: Georgia, "Times New Roman", serif;
      line-height: 1.48;
    }

    .site-header {
      border-bottom: 1px solid #222;
      background: #efefef;
      position: sticky;
      top: 0;
      z-index: 20;
    }

    .site-header-inner {
      max-width: 1320px;
      margin: 0 auto;
      padding: 18px 22px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 18px;
    }

    .brand {
      font-size: clamp(22px, 2.2vw, 28px);
      font-weight: 700;
      color: #111;
    }

    .nav a {
      color: #222;
      text-decoration: none;
      font-size: 0.98rem;
    }

    .page {
      max-width: 1320px;
      margin: 0 auto;
      padding: 22px;
      display: grid;
      grid-template-columns: 88px minmax(0, 760px) 88px;
      gap: 8px;
      align-items: start;
    }

    .arrow-col {
      position: sticky;
      top: 88px;
      height: calc(100vh - 100px);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .arrow-stack {
      display: flex;
      flex-direction: column;
      gap: 10px;
      align-items: center;
    }

    .arrow-btn {
      width: 48px;
      height: 48px;
      border: 1px solid #222;
      border-radius: 999px;
      background: #f8f8f8;
      color: #111;
      font-size: 22px;
      line-height: 1;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      justify-content: center;
    }

    .arrow-btn.small {
      width: 42px;
      height: 42px;
      font-size: 18px;
    }

    .arrow-btn:hover { background: #fff; }
    .arrow-btn:disabled {
      opacity: 0.35;
      cursor: default;
      background: #efefef;
    }

    .article {
      padding: 8px 0 32px;
      min-height: calc(100vh - 140px);
    }

    .toolbar {
      display: flex;
      justify-content: flex-end;
      gap: 8px;
      margin-bottom: 12px;
    }

    .toolbar button {
      border: 1px solid #222;
      background: #fafafa;
      padding: 6px 10px;
      font: inherit;
      cursor: pointer;
    }

    .toolbar button:hover { background: #fff; }

    .article h1 {
      margin: 0 0 4px;
      font-size: clamp(28px, 3.3vw, 40px);
      line-height: 1.1;
      color: #111;
    }

    .article .date {
      color: #666;
      font-size: 0.95rem;
      margin-bottom: 18px;
    }

    .article p {
      margin: 0 0 12px;
      font-size: 1.02rem;
      color: #2a2a2a;
      line-height: 1.42;
    }

    .article p:last-child { margin-bottom: 0; }

    .editor {
      display: none;
      border: 1px solid #222;
      background: #f7f7f7;
      padding: 12px;
      margin: 0 0 16px;
    }

    .editor.active { display: block; }

    .editor-grid {
      display: grid;
      gap: 8px;
    }

    .editor label {
      font-size: 0.9rem;
      color: #444;
    }

    .editor input,
    .editor textarea {
      width: 100%;
      border: 1px solid #222;
      background: #fff;
      padding: 8px;
      font: inherit;
    }

    .editor textarea {
      min-height: 180px;
      resize: vertical;
      line-height: 1.35;
    }

    .editor-actions {
      margin-top: 10px;
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      align-items: center;
    }

    .editor-actions button {
      border: 1px solid #222;
      background: #fff;
      padding: 8px 10px;
      font: inherit;
      cursor: pointer;
    }

    .editor-actions .primary {
      background: #e8f0ff;
      font-weight: 600;
    }

    .editor-note {
      color: #666;
      font-size: 0.86rem;
    }

    .mobile-controls {
      display: none;
      margin-top: 22px;
      gap: 8px;
      flex-wrap: wrap;
      justify-content: center;
    }

    .mobile-controls .arrow-btn {
      width: auto;
      min-width: 70px;
      border-radius: 0;
      padding: 10px 12px;
      font-size: 15px;
      gap: 6px;
      height: auto;
    }

    .post-count {
      color: #666;
      font-size: 0.94rem;
      text-align: center;
      margin-top: 14px;
    }

    @media (max-width: 920px) {
      .page { grid-template-columns: 1fr; }
      .arrow-col { display: none; }
      .article { min-height: auto; }
      .mobile-controls { display: flex; }
    }
  </style>
</head>
<body>
  <header class="site-header">
    <div class="site-header-inner">
      <div class="brand">Cole Firlie</div>
      <nav class="nav" aria-label="Top navigation">
        <a href="index.html">Home</a>
      </nav>
    </div>
  </header>

  <main class="page">
    <div class="arrow-col">
      <div class="arrow-stack">
        <button id="firstBtn" class="arrow-btn small" aria-label="First (newest) entry">«</button>
        <button id="prevBtn" class="arrow-btn" aria-label="Newer entry">←</button>
      </div>
    </div>

    <article class="article" aria-live="polite">
      <div class="toolbar">
        <button id="adminBtn" type="button">Edit</button>
      </div>

      <section id="editorPanel" class="editor" aria-label="Post editor">
        <div class="editor-grid">
          <div>
            <label for="editTitle">Title</label>
            <input id="editTitle" type="text" maxlength="180" />
          </div>
          <div>
            <label for="editDate">Date</label>
            <input id="editDate" type="text" placeholder="February 25, 2026" maxlength="80" />
          </div>
          <div>
            <label for="editBody">Body (one paragraph per line)</label>
            <textarea id="editBody"></textarea>
          </div>
        </div>
        <div class="editor-actions">
          <button id="newPostBtn" type="button">New post</button>
          <button id="saveDraftBtn" type="button">Save edits</button>
          <button id="publishBtn" class="primary" type="button">Publish</button>
          <button id="deletePostBtn" type="button">Delete post</button>
          <button id="exitEditBtn" type="button">Close editor</button>
          <span class="editor-note">Saved in your browser for now.</span>
        </div>
      </section>

      <h1 id="postTitle">Loading…</h1>
      <div class="date" id="postDate"></div>
      <div id="postBody"></div>

      <div class="mobile-controls">
        <button id="firstBtnMobile" class="arrow-btn" aria-label="First (newest) entry">« First</button>
        <button id="prevBtnMobile" class="arrow-btn" aria-label="Newer entry">← Newer</button>
        <button id="nextBtnMobile" class="arrow-btn" aria-label="Older entry">Older →</button>
        <button id="lastBtnMobile" class="arrow-btn" aria-label="Last (oldest) entry">Last »</button>
      </div>

      <div class="post-count" id="postCount"></div>
    </article>

    <div class="arrow-col">
      <div class="arrow-stack">
        <button id="nextBtn" class="arrow-btn" aria-label="Older entry">→</button>
        <button id="lastBtn" class="arrow-btn small" aria-label="Last (oldest) entry">»</button>
      </div>
    </div>
  </main>

  <script>
    const STORAGE_KEY = 'cole-blog-posts-v2';
    const ADMIN_ENABLED_KEY = 'cole-blog-admin-enabled';
    // This is only a convenience gate for a static site (not real security).
    const ADMIN_PASSCODE = 'muggzy';

    const defaultPosts = [
      {
        title: 'First Post',
        date: 'February 25, 2026',
        body: [
          'This is the first entry in the on-site blog. You can write as much as you want here in plain paragraphs.',
          'Use the arrows on the sides to move between entries. The newest entry always appears first when someone opens the page.',
          'If you click Edit and enter your passcode, you can update a post right on the page and press Publish.'
        ]
      },
      {
        title: 'Another Entry',
        date: 'February 20, 2026',
        body: [
          'This is an older post. You can add as many entries as you want.',
          'Paragraph spacing is tightened a bit so blocks read clearly without too much vertical drift.'
        ]
      }
    ];

    function cloneDefault() {
      return JSON.parse(JSON.stringify(defaultPosts));
    }

    function loadPosts() {
      try {
        const raw = localStorage.getItem(STORAGE_KEY);
        if (!raw) return cloneDefault();
        const parsed = JSON.parse(raw);
        if (!Array.isArray(parsed) || parsed.length === 0) return cloneDefault();
        return parsed.map(p => ({
          title: typeof p.title === 'string' ? p.title : 'Untitled',
          date: typeof p.date === 'string' ? p.date : '',
          body: Array.isArray(p.body) ? p.body.filter(x => typeof x === 'string') : []
        }));
      } catch {
        return cloneDefault();
      }
    }

    let posts = loadPosts();
    let current = 0; // newest first
    let adminMode = localStorage.getItem(ADMIN_ENABLED_KEY) === '1';

    const titleEl = document.getElementById('postTitle');
    const dateEl = document.getElementById('postDate');
    const bodyEl = document.getElementById('postBody');
    const countEl = document.getElementById('postCount');

    const editorPanel = document.getElementById('editorPanel');
    const adminBtn = document.getElementById('adminBtn');
    const editTitle = document.getElementById('editTitle');
    const editDate = document.getElementById('editDate');
    const editBody = document.getElementById('editBody');

    const prevBtns = [document.getElementById('prevBtn'), document.getElementById('prevBtnMobile')];
    const nextBtns = [document.getElementById('nextBtn'), document.getElementById('nextBtnMobile')];
    const firstBtns = [document.getElementById('firstBtn'), document.getElementById('firstBtnMobile')];
    const lastBtns = [document.getElementById('lastBtn'), document.getElementById('lastBtnMobile')];

    function savePosts() {
      localStorage.setItem(STORAGE_KEY, JSON.stringify(posts));
    }

    function fillEditorFromCurrent() {
      const post = posts[current];
      editTitle.value = post.title;
      editDate.value = post.date;
      editBody.value = post.body.join('\n\n');
    }

    function editorToPost() {
      const title = editTitle.value.trim() || 'Untitled';
      const date = editDate.value.trim();
      const body = editBody.value
        .split(/\n{2,}|\r\n\r\n/)
        .map(s => s.trim())
        .filter(Boolean);
      return { title, date, body: body.length ? body : [''] };
    }

    function setAdminUI() {
      adminBtn.textContent = adminMode ? 'Editing' : 'Edit';
      editorPanel.classList.toggle('active', adminMode);
      if (adminMode) fillEditorFromCurrent();
    }

    function renderPost(scrollTop = false) {
      if (!posts.length) posts = cloneDefault();
      const post = posts[current];
      titleEl.textContent = post.title;
      dateEl.textContent = post.date;
      bodyEl.innerHTML = '';

      post.body.forEach(par => {
        const p = document.createElement('p');
        p.textContent = par;
        bodyEl.appendChild(p);
      });

      countEl.textContent = `Entry ${current + 1} of ${posts.length}`;

      const atNewest = current === 0;
      const atOldest = current === posts.length - 1;

      prevBtns.forEach(btn => btn.disabled = atNewest);
      firstBtns.forEach(btn => btn.disabled = atNewest);
      nextBtns.forEach(btn => btn.disabled = atOldest);
      lastBtns.forEach(btn => btn.disabled = atOldest);

      if (adminMode) fillEditorFromCurrent();
      if (scrollTop) window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    function goPrev() { if (current > 0) { current -= 1; renderPost(true); } }
    function goNext() { if (current < posts.length - 1) { current += 1; renderPost(true); } }
    function goFirst() { if (current !== 0) { current = 0; renderPost(true); } }
    function goLast() { if (current !== posts.length - 1) { current = posts.length - 1; renderPost(true); } }

    prevBtns.forEach(btn => btn.addEventListener('click', goPrev));
    nextBtns.forEach(btn => btn.addEventListener('click', goNext));
    firstBtns.forEach(btn => btn.addEventListener('click', goFirst));
    lastBtns.forEach(btn => btn.addEventListener('click', goLast));

    adminBtn.addEventListener('click', () => {
      if (!adminMode) {
        const entered = window.prompt('Passcode to edit posts:');
        if (entered !== ADMIN_PASSCODE) return;
        adminMode = true;
        localStorage.setItem(ADMIN_ENABLED_KEY, '1');
      } else {
        adminMode = false;
        localStorage.removeItem(ADMIN_ENABLED_KEY);
      }
      setAdminUI();
    });

    document.getElementById('saveDraftBtn').addEventListener('click', () => {
      if (!adminMode) return;
      posts[current] = editorToPost();
      renderPost();
    });

    document.getElementById('publishBtn').addEventListener('click', () => {
      if (!adminMode) return;
      posts[current] = editorToPost();
      savePosts();
      renderPost();
      alert('Published (saved in this browser).');
    });

    document.getElementById('newPostBtn').addEventListener('click', () => {
      if (!adminMode) return;
      const today = new Date().toLocaleDateString(undefined, { year: 'numeric', month: 'long', day: 'numeric' });
      posts.unshift({ title: 'New Post', date: today, body: ['Write here...'] });
      current = 0; // newest first
      savePosts();
      renderPost();
    });

    document.getElementById('deletePostBtn').addEventListener('click', () => {
      if (!adminMode || posts.length <= 1) return;
      if (!confirm('Delete this post?')) return;
      posts.splice(current, 1);
      if (current >= posts.length) current = posts.length - 1;
      savePosts();
      renderPost();
    });

    document.getElementById('exitEditBtn').addEventListener('click', () => {
      adminMode = false;
      localStorage.removeItem(ADMIN_ENABLED_KEY);
      setAdminUI();
    });

    window.addEventListener('keydown', (e) => {
      if (e.key === 'ArrowLeft') goPrev();
      if (e.key === 'ArrowRight') goNext();
      if (e.key === 'Home') goFirst();
      if (e.key === 'End') goLast();
    });

    setAdminUI();
    renderPost();
  </script>
</body>
</html>
